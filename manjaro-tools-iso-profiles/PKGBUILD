# Maintainer: Philip MÃ¼ller <philm[at]manjaro[dog]org>
# Contributor: artoo <artoo@manjaro.org>

pkgbase=manjaro-iso-profiles
pkgname=('manjaro-iso-profiles' 'manjaro-iso-profiles-community' 'manjaro-iso-profiles-openrc')
pkgver=0.9.11
pkgrel=2.1
arch=('any')
url="https://github.com/manjaro/manjaro-tools-iso-profiles"
license=('GPL')
groups=('manjaro-tools')
makedepends=('git')
source=("${pkgname}-${pkgver}-${pkgrel}.tar.gz::$url/archive/${pkgver}-2.tar.gz")
sha256sums=('1cdda4d03582f1e5b7af1aa64e6a6dda8f8dbb57e54acb415f754684e797ffa6')

prepare() {
	cd *iso-profiles-${pkgver}-2
	# patches here
}

package_manjaro-iso-profiles() {
	pkgdesc='Manjaro Linux official iso profiles'
	depends=('manjaro-tools-iso>=0.9.8')
	conflicts=('manjaroiso-profiles'
		'manjaroiso-openrc-profiles'
		'manjaroiso-community-profiles')

	cd *iso-profiles-${pkgver}-2
	install -d $pkgdir/usr/share/manjaro-tools/iso-profiles
	cp -a * $pkgdir/usr/share/manjaro-tools/iso-profiles

	install -dm 0755 $srcdir/_community
	mv $pkgdir/usr/share/manjaro-tools/iso-profiles/{cinnamon,lxqt,openbox,enlightenment,i3,netbook,gnome,lxde,mate,pantheon,net-minimal,sysmenu,lxqt-minimal} $srcdir/_community

	install -dm 0755 $srcdir/_openrc
	mv $pkgdir/usr/share/manjaro-tools/iso-profiles/{xfce-openrc,net-openrc} $srcdir/_openrc
}

package_manjaro-iso-profiles-community() {
	pkgdesc='Manjaro Linux community iso profiles'
	depends=('manjaro-iso-profiles')

	install -dm 0755 $pkgdir/usr/share/manjaro-tools/iso-profiles

	mv $srcdir/_community/* $pkgdir/usr/share/manjaro-tools/iso-profiles/
}

package_manjaro-iso-profiles-openrc() {
	pkgdesc='Manjaro Linux openrc profiles'
	depends=('manjaro-iso-profiles')

	install -dm 0755 $pkgdir/usr/share/manjaro-tools/iso-profiles

	mv $srcdir/_openrc/* $pkgdir/usr/share/manjaro-tools/iso-profiles/
}
