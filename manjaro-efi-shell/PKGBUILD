# Maintainer: artoo <artoo@manjaro.org>
# Maintainer: Philip MÃ¼ller <philm@manjaro.org>

_url=https://raw.githubusercontent.com/tianocore/edk2/master

pkgname=manjaro-efi-shell
pkgver=20161006
pkgrel=1
pkgdesc="efi shell for manjaro-tools-iso"
arch=('x86_64')
license=('GPL')
url='https://github.com/manjaro/manjaro-tools'
provides=('manjaro-tools-efi-shell')
conflicts=('manjaro-tools-efi-shell')
replaces=('manjaro-tools-efi-shell')
source=("shellx64_v1.efi::${_url}/EdkShellBinPkg/FullShell/X64/Shell_Full.efi"
        "shellx64_v2.efi::${_url}/ShellBinPkg/UefiShell/X64/Shell.efi"
        'uefi-shell-v1-x86_64.conf'
        'uefi-shell-v2-x86_64.conf')
sha256sums=('ea5e763a8a5f9733dbf7c33ffa16a19e078c6af635b51d8457bc377a22106a8c'
            '889a1f28051955fc33a9512901b2d0f5a5d500750e09fb7caf21defb1fd3b657'
            '026ffb24a313b18b5a633cf90a935d016d11c044c73dc9fab9728f851ccfd999'
            '21abce4a798f4c94e093352cec9a53341693be872ecb2c51b93f45e3cf802995')

pkgver() {
	date +%Y%m%d
}

package() {
    local _target=${pkgdir}/usr/share/manjaro-tools/efi_shell
    install -Dm644 ${srcdir}/shellx64_v1.efi ${_target}/shellx64_v1.efi
    install -m644 ${srcdir}/uefi-shell-v1-x86_64.conf ${_target}/uefi-shell-v1-x86_64.conf

    install -m644 ${srcdir}/shellx64_v2.efi ${_target}/shellx64_v2.efi
    install -m644 ${srcdir}/uefi-shell-v2-x86_64.conf ${_target}/uefi-shell-v2-x86_64.conf
}
