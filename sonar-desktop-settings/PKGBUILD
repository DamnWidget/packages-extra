# Maintainer: Philip MÃ¼ller <philm[at]manjaro[dog]org>
# Contributor: artoo <artoo@manjaro.org>

pkgbase=desktop-settings
pkgname=('sonar-gnome-settings'
	'sonar-mate-settings'
	'sonar-common')
	#'sonar-calamares-branding')
pkgver=20160122
pkgrel=1
arch=('any')
url="https://github.com/manjaro/desktop-settings"
license=('GPL')
makedepends=('git')
source=("git+$url.git")
sha256sums=('SKIP')
install=$pkgbase.install

_inst_dir(){
	install -d $pkgdir/etc
	cp -r $srcdir/$pkgbase/$1/skel $pkgdir/etc

	if [ -d $srcdir/$pkgbase/$1/bash ]; then
		cp -r $srcdir/$pkgbase/$1/bash $pkgdir/etc
	fi

	if [[ -d $srcdir/$pkgbase/$1/scripts ]]; then
		install -d $pkgdir/usr/bin
		cp $srcdir/$pkgbase/$1/scripts/* $pkgdir/usr/bin
	fi

	if [[ -d $srcdir/$pkgbase/$1/schemas ]]; then
		install -d $pkgdir/usr/share/glib-2.0/schemas
		cp $srcdir/$pkgbase/$1/schemas/* $pkgdir/usr/share/glib-2.0/schemas
	fi
}

pkgver() {
	date +%Y%m%d
}

package_sonar-mate-settings() {
	pkgdesc='Sonar Linux mate settings'
	conflicts=('manjaro-kde-settings'
		'manjaro-lxqt-minimal-settings'
		'manjaro-xfce-minimal-settings'
		'manjaro-kde-minimal-settings'
		'manjaro-budgie-minimal-settings'
		'manjaro-bspwm-settings'
		'manjaro-budgie-settings'
		'manjaro-cinnamon-settings'
		'manjaro-deepin-settings'
		'manjaro-fluxbox-settings'
		'manjaro-gnome-settings'
		'manjaro-i3-settings'
		'manjaro-jwm-settings'
		'manjaro-lxde-settings'
		'manjaro-lxqt-settings'
		'manjaro-mate-settings'
		'manjaro-netbook-settings'
		'manjaro-pantheon-settings'
		'sonar-gnome-settings')

	_inst_dir 'sonar/mate'
}

package_sonar-gnome-settings() {
	pkgdesc='Sonar Linux gnome settings'
	conflicts=('manjaro-kde-settings'
		'manjaro-lxqt-minimal-settings'
		'manjaro-xfce-minimal-settings'
		'manjaro-kde-minimal-settings'
		'manjaro-budgie-minimal-settings'
		'manjaro-bspwm-settings'
		'manjaro-budgie-settings'
		'manjaro-cinnamon-settings'
		'manjaro-deepin-settings'
		'manjaro-fluxbox-settings'
		'manjaro-gnome-settings'
		'manjaro-i3-settings'
		'manjaro-jwm-settings'
		'manjaro-lxde-settings'
		'manjaro-lxqt-settings'
		'manjaro-mate-settings'
		'manjaro-netbook-settings'
		'manjaro-pantheon-settings'
		'sonar-mate-settings')

	_inst_dir 'sonar/gnome'
}

package_sonar-calamares-branding() {
	pkgdesc='Sonar Linux calamares branding'
	depends=('calamares')

	install -d ${pkgdir}/usr/share/calamares/branding/sonar
	cp $srcdir/$pkgbase/sonar/calamares/branding/sonar/* ${pkgdir}/usr/share/calamares/branding/sonar
}

package_sonar-backgrounds() {
	install -d ${pkgdir}/usr/share/backgrounds
	cp ${srcdir}/$pkgbase/sonar/backgrounds/* "${pkgdir}/usr/share/backgrounds"
}

package_sonar-common() {
	pkgdesc='Sonar Linux common'

	install -d ${pkgdir}/usr/share/applications
	cp $srcdir/$pkgbase/shared/doc/sonar/apps/* ${pkgdir}/usr/share/applications

	install -d ${pkgdir}/usr/share/sonar
	cp $srcdir/$pkgbase/shared/doc/sonar/*.{txt,odt} ${pkgdir}/usr/share/sonar
}
